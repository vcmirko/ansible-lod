---
- name: "Role - generali/logic/uc03_resize_volume"
  block:

  ## Assemble vars_external from generali vrealize input
  - name: "Apply vrealize input to vars_external"
    set_fact:
      vars_external: "{{ lookup('template', '../templates/uc03_resize_volume.yml.j2', convert_data=False) | from_yaml }}"

  - name: "Logic - uc03 Resize Volume"
    uc03_resize_volume:
      vars_external : "{{ vars_external }}"
    delegate_to: localhost
    register: logic_result

  # - debug: var=logic_result

  - name: Register logic result
    set_fact:
      vars_local : "{{ logic_result.vars }}"

  - name: Logging
    set_fact:
      qlogname: "{{ vars_external | to_nice_yaml(2) | indent(2,true) | do_log('Running logic uc03_resize_volume','vars_external',qlogname) }}"

  - name: Logging
    set_fact:
      qlogname: "{{ vars_local | to_nice_yaml(2) | indent(2,true) | do_log('After logic uc03_resize_volume','vars_local',qlogname) }}"